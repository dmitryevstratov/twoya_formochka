<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Заказы</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <script th:src="@{js/classes/item.js}" type="text/javascript"></script>
    <script th:src="@{js/utils.js}" type="text/javascript"></script>
    <script th:src="@{js/commonConstants.js}" type="text/javascript"></script>
    <script th:src="@{js/form.js}" type="text/javascript"></script>
    <script th:src="@{js/discountFetchApi.js}" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

</head>
<header>
    <section>
        <nav>
            <ul>
                <li>
                    <a th:href="@{/index.html}">Главная</a>
                </li>
                <li>
                    <a th:href="@{/clients.html}">Клиенты</a>
                </li>
                <li>
                    <a th:href="@{/orders.html}">Заказы</a>
                </li>
                <li>
                    <a th:href="@{/orders-status.html}">Статусы заказов</a>
                </li>
                <li>
                    <a th:href="@{/discounts.html}">Скидки</a>
                </li>
                <li>
                    <a th:href="service_1.html">Сервис 5</a>
                </li>
                <li>
                    <a th:href="service_1.html">Сервис 6</a>
                </li>
            </ul>
        </nav>
    </section>
</header>
<body>
<section>
    <div>
        <h1>Скидки</h1>
    </div>
    <div>
        <!-- Button trigger modal create order -->
        <button data-bs-toggle="modal" data-bs-target="#addDiscount" onmousedown="openForm('addDiscount')">
            Создать скидку
        </button>
    </div>
    <div>
        <form id="search-discount">
            <ul>
                <li>
                    <h5>Поиск</h5>
                </li>
                <li>
                    <label for="id-discount-search"></label>
                    <input type="number" id="id-discount-search" placeholder="№">
                </li>
                <li>
                    <label for="type-discount-search"></label>
                    <input type="text" id="type-discount-search" placeholder="Тип скидки">
                </li>
                <li>
                    <button onclick="searchDiscount()" type="button">Найти</button>
                </li>
            </ul>
        </form>
    </div>
    <div>
        <ul id="sort-discount">
            <li>
                <h5>Сортировка</h5>
            </li>
            <li>
                <h6>№</h6>
                <button onclick="sortBy(1, 'id-discount', 'data-discounts')">&uarr;</button>
                <button onclick="sortBy(2, 'id-discount', 'data-discounts')">&darr;</button>
            </li>
            <li>
                <h6>Тип скидки</h6>
                <button onclick="sortBy(1, 'type-discount', 'data-discounts')">&uarr;</button>
                <button onclick="sortBy(2, 'type-discount', 'data-discounts')">&darr;</button>
            </li>
            <li>
                <h6>Значение скидки</h6>
                <button onclick="sortBy(1, 'value-discount', 'data-discounts')">&uarr;</button>
                <button onclick="sortBy(2, 'value-discount', 'data-discounts')">&darr;</button>
            </li>
        </ul>
    </div>
    <table>
        <thead>
        <tr>
            <th>№</th>
            <th>Тип скидки</th>
            <th>Значение скидки</th>
        </tr>
        </thead>
        <tbody id="data-discounts">
        </tbody>
    </table>
</section>
<!-- Modal add order -->
<div class="modal fade" id="addDiscount" tabindex="-1" aria-labelledby="addDiscountLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div>
                <div class="modal-header">
                    <h5 class="modal-title" id="addDiscountLabel">Создать скидку</h5>
                    <button type="button" onclick="hiddenForm('addDiscount')" class="btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button onclick="hiddenForm('addDiscount')" type="button" data-bs-dismiss="modal" aria-label="Close">
                        Закрыть
                    </button>
                    <button onclick="createDiscount()" type="button">Создать
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    loadDiscounts('/discounts');

    (function () {
        'use strict'

        // Получите все формы, к которым мы хотим применить пользовательские стили проверки Bootstrap
        const forms = document.querySelectorAll('.needs-validation');

        // Зацикливайтесь на них и предотвращайте отправку
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('click', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>
</body>
<footer>
    <section>
        <i>Created by Evstratov Dmitry</i>
    </section>
</footer>
</html>