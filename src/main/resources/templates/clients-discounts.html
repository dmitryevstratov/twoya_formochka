<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Клиенты</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <script th:src="@{js/commonConstants.js}" type="text/javascript"></script>
    <script th:src="@{js/clientFetchApi.js}" type="text/javascript"></script>
    <script th:src="@{js/utils.js}" type="text/javascript"></script>
    <script th:src="@{js/form.js}" type="text/javascript"></script>
    <script th:src="@{js/classes/discount.js}" type="text/javascript"></script>
    <script th:src="@{js/classes/discountType.js}" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

</head>
<header>
    <section>
        <nav class="main-menu clearfix">
            <ul>
                <li>
                    <a th:href="@{/index.html}">Главная</a>
                </li>
                <li>
                    <a th:href="@{/clients.html}">Клиенты</a>
                </li>
                <li>
                    <a th:href="@{/orders.html}">Заказы</a>
                </li>
                <li>
                    <a th:href="@{/orders-status.html}">Статусы заказов</a>
                </li>
                <li>
                    <a th:href="@{/discounts.html}">Скидки</a>
                </li>
                <li>
                    <a th:href="@{/clients-discounts.html}">Скидки клиентов</a>
                </li>
                <li>
                    <a th:href="@{/orders-statistics.html}">Статистика по заказам</a>
                </li>
                <li>
                    <a th:href="@{/tax.html}">Квартальные отчеты для налоговой</a>
                </li>
            </ul>
        </nav>
    </section>
</header>
<body>
<section class="content-main">
    <div>
        <h1>Скидки клиентов</h1>
    </div>
    <div class="container-search clearfix">
        <form>
            <ul>
                <li>
                    <h5>Поиск</h5>
                </li>
                <li>
                    <label for="id-search"></label>
                    <input type="number" id="id-search" placeholder="№">
                </li>
                <li>
                    <label for="firstname-search"></label>
                    <input type="text" id="firstname-search" placeholder="Имя">
                </li>
                <li>
                    <label for="lastname-search"></label>
                    <input type="text" id="lastname-search" placeholder="Фамилия">
                </li>
                <li>
                    <label for="discount-search"></label>
                    <input type="text" id="discount-search" placeholder="Название скидки">
                </li>
                <li>
                    <button class="button button-search" onclick="searchClientWithDiscount()" type="button">Найти</button>
                </li>
            </ul>
        </form>
    </div>
    <table class="table-content">
        <thead>
        <tr>
            <th>№</th>
            <th>Имя</th>
            <th>Фамилия</th>
            <th>Фамилия</th>
            <th>Скидки</th>
        </tr>
        </thead>
        <tbody id="data-clients-with-discounts">
        </tbody>
    </table>
</section>
<!-- Modal edit client -->
<div class="modal fade" id="editClient" tabindex="-1" aria-labelledby="editClientDiscountLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="editClientDiscountForm" class="row g-3 needs-validation" novalidate>
                <div class="modal-header">
                    <h5 class="modal-title" id="editClientDiscountLabel">Редактировать скидки клиента</h5>
                    <button type="button" onclick="hiddenForm('editClient')" class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <h5>Выбрать скидку</h5>
                        <ul>
                            <li>
                                <label for="discount-article-search"></label>
                                <input type="text" id="discount-article-search" placeholder="Артикул">
                            </li>
                            <li>
                                <label for="discount-name-search"></label>
                                <input type="text" id="discount-name-search" placeholder="Название скидки">
                            </li>
                            <li>
                                <button class="button button-search" onclick="searchClientDiscountToSelect()" type="button">Найти</button>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <div>Найдено: <span id="discount-count-search">0</span></div>
                        <form>
                            <label for="discount-found-search"></label>
                            <select onchange="fillSelectClientDiscounts('')" name="discount-found-search"
                                    id="discount-found-search"></select>
                        </form>
                    </div>
                    <div>
                        <table class="table-content">
                            <thead>
                            <tr>
                                <th>№</th>
                                <th>Название</th>
                                <th>Величина</th>
                            </tr>
                            </thead>
                            <tbody id="data-client-all-discounts">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="button button-search" onclick="hiddenForm('editClient')" type="button" data-bs-dismiss="modal"
                            aria-label="Close">
                        Закрыть
                    </button>
                    <button class="button button-update" id="client-id" onclick="editClientDiscount()" type="button">Изменить
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    loadClientsWithDiscounts();
</script>
</body>
<footer>
    <section>
        <i>Created by Evstratov Dmitry</i>
    </section>
</footer>
</html>